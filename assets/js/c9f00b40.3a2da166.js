"use strict";(self.webpackChunkdev_journal=self.webpackChunkdev_journal||[]).push([[5470],{5232:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var s=t(3010),a=t(2803);const i={sidebar_position:2},l="Algolia setup",o={unversionedId:"tutorial-docusaurus/algolia-setup",id:"tutorial-docusaurus/algolia-setup",title:"Algolia setup",description:"Algolia dashboard settings",source:"@site/docs/tutorial-docusaurus/algolia-setup.md",sourceDirName:"tutorial-docusaurus",slug:"/tutorial-docusaurus/algolia-setup",permalink:"/docs/tutorial-docusaurus/algolia-setup",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"CI with Github Actions",permalink:"/docs/tutorial-docusaurus/ci-with-github-actions"},next:{title:"Tailwind CSS Setup",permalink:"/docs/tutorial-docusaurus/tailwindcss"}},r={},c=[{value:"Algolia dashboard settings",id:"algolia-dashboard-settings",level:3},{value:"Docusaurus settings",id:"docusaurus-settings",level:3},{value:"Add to navbar",id:"add-to-navbar",level:3},{value:"Deploy with Github Actions",id:"deploy-with-github-actions",level:3}];function d(e){const n=Object.assign({h1:"h1",h3:"h3",ul:"ul",li:"li",a:"a",img:"img",code:"code",p:"p",pre:"pre"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"algolia-setup",children:"Algolia setup"}),"\n",(0,s.jsx)(n.h3,{id:"algolia-dashboard-settings",children:"Algolia dashboard settings"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Sign up for an account with ",(0,s.jsx)(n.a,{href:"https://www.algolia.com/users/sign_up",children:"Algolia"})]}),"\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.a,{href:"https://www.algolia.com/dashboard",children:"dashboard"})]}),"\n",(0,s.jsxs)(n.li,{children:["Click on API Keys ",(0,s.jsx)(n.img,{alt:"Api Key",src:t(9614).Z+"",width:"1441",height:"1086"})]}),"\n",(0,s.jsxs)(n.li,{children:["Make note of the Application ID, we will need it ",(0,s.jsx)(n.img,{alt:"App ID",src:t(1666).Z+"",width:"1441",height:"1086"})]}),"\n",(0,s.jsxs)(n.li,{children:["Click on All API Keys ",(0,s.jsx)(n.img,{alt:"All API Keys",src:t(8845).Z+"",width:"1441",height:"1086"})]}),"\n",(0,s.jsxs)(n.li,{children:["Click on New API Key ",(0,s.jsx)(n.img,{alt:"New API Key",src:t(7962).Z+"",width:"1441",height:"1086"})]}),"\n",(0,s.jsxs)(n.li,{children:["Scroll to the bottom and add ",(0,s.jsx)(n.code,{children:"addObject"}),", ",(0,s.jsx)(n.code,{children:"deleteIndex"})," and ",(0,s.jsx)(n.code,{children:"editSettings"})," to the ACL list\nand click on ",(0,s.jsx)(n.code,{children:"Create"})," ",(0,s.jsx)(n.img,{alt:"ACL",src:t(5664).Z+"",width:"1441",height:"1086"})]}),"\n",(0,s.jsxs)(n.li,{children:["Make note of the API Key, we will need it ",(0,s.jsx)(n.img,{alt:"API Key",src:t(6385).Z+"",width:"1441",height:"1086"})]}),"\n",(0,s.jsxs)(n.li,{children:["Now we need to create an index, click on search ",(0,s.jsx)(n.img,{alt:"Search",src:t(8424).Z+"",width:"1441",height:"1086"})]}),"\n",(0,s.jsxs)(n.li,{children:["Click on create index, give it the name index and click create ",(0,s.jsx)(n.img,{alt:"Create Index",src:t(9403).Z+"",width:"1441",height:"1086"})]}),"\n",(0,s.jsx)(n.li,{children:"We are done with Algolia dashboard settings \ud83c\udf89\ufe0f"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"docusaurus-settings",children:"Docusaurus settings"}),"\n",(0,s.jsx)(n.p,{children:"Install Algolia plugin"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm add @docusaurus/theme-search-algolia\n"})}),"\n",(0,s.jsx)(n.p,{children:"Add below snippet with your credentials we noted above inside the themeConfig object"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="./docusaurus.config.js"',children:'algolia: {\n    appId: "your_app_id",\n    apiKey: "your_api_key",\n    indexName: \'index\',\n    contextualSearch: true,\n    searchParameters: {},\n},\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Make a file in the root directory called ",(0,s.jsx)(n.code,{children:"config.json"})," and paste the below code in it. Replace the address with your own at the highlighted line. Leave ",(0,s.jsx)(n.code,{children:"/sitemap.xml"})," at the end. ",(0,s.jsx)(n.code,{children:"start_url"})," is needed if docs are at the top level of your site ",(0,s.jsx)(n.code,{children:"www.example.com"}),". It may not be needed if docs are at ",(0,s.jsx)(n.code,{children:"docs.example.com"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'{3,4} title="./config.json"',children:'{\n    "index_name": "index",\n    "sitemap_urls": ["https://your_website.com/sitemap.xml"],\n    "start_urls": ["https://your_website.com"], // May not be needed, check above\n    "sitemap_alternate_links": true,\n    "selectors": {\n        "lvl0": {\n            "selector": "(//ul[contains(@class,\'menu__list\')]//a[contains(@class, \'menu__link menu__link--sublist menu__link--active\')]/text() | //nav[contains(@class, \'navbar\')]//a[contains(@class, \'navbar__link--active\')]/text())[last()]",\n            "type": "xpath",\n            "global": true,\n            "default_value": "Documentation"\n        },\n        "lvl1": "header h1",\n        "lvl2": "article h2",\n        "lvl3": "article h3",\n        "lvl4": "article h4",\n        "lvl5": "article h5, article td:first-child",\n        "lvl6": "article h6",\n        "text": "article p, article li, article td:last-child"\n    },\n    "strip_chars": " .,;:#",\n    "custom_settings": {\n        "separatorsToIndex": "_",\n        "attributesForFaceting": ["language", "version", "type", "docusaurus_tag"],\n        "attributesToRetrieve": ["hierarchy", "content", "anchor", "url", "url_without_anchor", "type"]\n    },\n    "conversation_id": ["833762294"],\n    "nb_hits": 46250\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Also make a ",(0,s.jsx)(n.code,{children:".env"})," file at the root level of your project if you already don't have one and add your credentials in it. Variables need to be named exactly as in the example with no spaces."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="./.env"',children:"ALGOLIA_APP_ID=your_app_id\nALGOLIA_API_KEY=your_app_key\n"})}),"\n",(0,s.jsxs)(n.p,{children:["We need install a small dependency called jq. Get it ",(0,s.jsx)(n.a,{href:"https://stedolan.github.io/jq/download/",children:"here"})]}),"\n",(0,s.jsxs)(n.p,{children:["Install docker from ",(0,s.jsx)(n.a,{href:"https://www.docker.com/",children:"here"})]}),"\n",(0,s.jsx)(n.p,{children:"Finally, run the below command in a terminal at the path of your project root and you should now have an index! \ud83c\udf89\ufe0f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'docker run -it --env-file=.env -e "CONFIG=$(cat ./config.json | jq -r tostring)" algolia/docsearch-scraper\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Here's what the output should look like ",(0,s.jsx)(n.img,{alt:"Output",src:t(562).Z+"",width:"1441",height:"1086"})]}),"\n",(0,s.jsx)(n.h3,{id:"add-to-navbar",children:"Add to navbar"}),"\n",(0,s.jsx)(n.p,{children:"Make sure to add search to navbar items list."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'{19-22} title="./docusaurus.config.js"',children:'navbar: {\n    title: "Portfolio",\n    logo: {\n        alt: "My Site Logo",\n        src: "img/logo.svg",\n    },\n    items: [\n        {\n            type: "docSidebar",\n            sidebarId: "tutorialSidebar",\n            position: "left",\n            label: "Tutorials",\n        },\n        {\n            to: "/blog",\n            label: "Blog",\n            position: "left",\n        },\n        {\n            type: "search",\n            position: "right",\n        },\n        {\n            href: "https://github.com/onattech",\n            label: "GitHub",\n            position: "right",\n        },\n    ],\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"deploy-with-github-actions",children:"Deploy with Github Actions"}),"\n",(0,s.jsxs)(n.p,{children:["Make an ",(0,s.jsx)(n.code,{children:"algolia.yml"})," file in ",(0,s.jsx)(n.code,{children:".github/workflows/"})," folder any copy the contents below."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",metastring:"title='./.github/workflows/algolia.yml'",children:'name: Algolia Indexing\n\non:\n    workflow_run:\n        workflows: ["pages-build-deployment"]\n        types:\n            - completed\n\njobs:\n    algolia-index:\n        runs-on: ubuntu-latest\n\n        steps:\n            - name: Checkout code\n              uses: actions/checkout@v2\n\n            - name: Install JQ\n              run: sudo apt-get install -y jq\n\n            - name: Run Algolia Scraper\n              run: |\n                  docker run --env-file=.env -e "CONFIG=$(cat ./config.json | jq -r tostring)" algolia/docsearch-scraper\n'})})]})}const h=function(e={}){const{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(d,e)})):d(e)}},5664:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/acl-64cf592afdbb3c2506e48a184963363d.png"},8845:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/allApiKeys-260f159e149987e6d02acf8c0634e672.png"},9614:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/apiKey-48d5a376055b36c1575c5ffa8fb52f84.png"},6385:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/apiKeyACL-0fa9bd6074be0ab85979392901470cbf.png"},1666:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/appId-076f0222f6ffa0d284d9de2563953412.png"},9403:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/createIndex-4ae7320fffa95d026af5ca195131cac5.png"},562:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/dockerResults-ff9e87e239ef719aad0588f00b5e23f6.png"},7962:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/newApiKey-c4659fa53f51f0da3f789fec75c23ff5.png"},8424:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/search-87971c17589c2513e48bc1b32648110e.png"},2803:(e,n,t)=>{t.d(n,{Zo:()=>o,ah:()=>i});var s=t(5170);const a=s.createContext({});function i(e){const n=s.useContext(a);return s.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const l={};function o({components:e,children:n,disableParentContext:t}){let o;return o=t?"function"==typeof e?e({}):e||l:i(e),s.createElement(a.Provider,{value:o},n)}}}]);