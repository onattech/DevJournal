"use strict";(self.webpackChunkdev_journal=self.webpackChunkdev_journal||[]).push([[550],{9613:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var i=n(9496);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=i.createContext({}),u=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return i.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=o,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||r;return n?i.createElement(h,a(a({ref:t},c),{},{components:n})):i.createElement(h,a({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:o,a[1]=s;for(var u=2;u<r;u++)a[u]=n[u];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8346:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>u});var i=n(1163),o=(n(9496),n(9613));const r={sidebar_position:1,title:"Add git commit hash to website"},a="Add git commit hash to your website",s={unversionedId:"tutorial-devops/add-commit-hash-to-website",id:"tutorial-devops/add-commit-hash-to-website",title:"Add git commit hash to website",description:"You updated your site, committed and pushed. Continious integration picked up and will soon deploy. Now is the time for endless refreshes. You are not even sure if changes are in place because the latest change didn't have any visual changes. How can you tell if the latest commit is published? Well, why not put the latest commit hash in the `` tag? It is very simple with Github Actions. Below is the snippet of the deployment yaml.",source:"@site/docs/tutorial-devops/add-commit-hash-to-website.md",sourceDirName:"tutorial-devops",slug:"/tutorial-devops/add-commit-hash-to-website",permalink:"/docs/tutorial-devops/add-commit-hash-to-website",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Add git commit hash to website"},sidebar:"tutorialSidebar",previous:{title:"Tutorial - DevOps",permalink:"/docs/category/tutorial---devops"},next:{title:"Github Actions env variables",permalink:"/docs/tutorial-devops/github-actions-env-variables"}},l={},u=[{value:"YAML",id:"yaml",level:2},{value:"Screenshot",id:"screenshot",level:2}],c={toc:u},p="wrapper";function d(e){let{components:t,...r}=e;return(0,o.kt)(p,(0,i.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"add-git-commit-hash-to-your-website"},"Add git commit hash to your website"),(0,o.kt)("p",null,"You updated your site, committed and pushed. Continious integration picked up and will soon deploy. Now is the time for endless refreshes. You are not even sure if changes are in place because the latest change didn't have any visual changes. How can you tell if the latest commit is published? Well, why not put the latest commit hash in the ",(0,o.kt)("inlineCode",{parentName:"p"},"<html>")," tag? It is very simple with Github Actions. Below is the snippet of the deployment yaml."),(0,o.kt)("h2",{id:"yaml"},"YAML"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'{22,23,25,26} title="deploy.yml"',"{22,23,25,26}":!0,title:'"deploy.yml"'},'name: Deploy to GitHub Pages\n\non:\n    push:\n        branches:\n            - main\njobs:\n    deploy:\n        name: Deploy to GitHub Pages\n        runs-on: ubuntu-latest\n        steps:\n            - uses: actions/checkout@v3\n            - uses: pnpm/action-setup@v2.2.4\n              with:\n                  version: 7\n\n            - name: \ud83d\udddc\ufe0f Install dependencies\n              run: pnpm install\n            - name: \ud83c\udfd7 Build website\n              run: pnpm run build\n\n            - name: \ud83d\udcbe Store commit hash as an enviromment variable\n              run: echo "COMMIT_HASH=$(echo ${{ github.sha }} | cut -c 1-7)" >> $GITHUB_ENV\n\n            - name: \ud83d\uddc3 Add commit hash to <html> tag in index.html\n              run: sed -i \'s/<html /<html data-commit-hash="\'"$COMMIT_HASH"\'" /\' ./build/index.html\n\n            - name: Deploy to GitHub Pages\n              uses: peaceiris/actions-gh-pages@v3\n              with:\n                  github_token: ${{ secrets.GITHUB_TOKEN }}\n                  publish_dir: ./build\n                  user_name: ${{ github.event.pusher.name }}\n                  user_email: ${{ github.event.pusher.email }}\n')),(0,o.kt)("h2",{id:"screenshot"},"Screenshot"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Api Key",src:n(2293).Z,width:"1193",height:"1051"})))}d.isMDXComponent=!0},2293:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/githash-0672d65987d201acb6244a8e938543b4.png"}}]);