"use strict";(self.webpackChunkdev_journal=self.webpackChunkdev_journal||[]).push([[9698],{7314:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var r=t(3010),o=t(2803);const s={sidebar_position:1},i="GO pretty print",a={unversionedId:"tutorial-golang/go-pretty-print",id:"tutorial-golang/go-pretty-print",title:"GO pretty print",description:"Here are some examples on how you may want to pretty print json or an http response.",source:"@site/docs/tutorial-golang/go-pretty-print.mdx",sourceDirName:"tutorial-golang",slug:"/tutorial-golang/go-pretty-print",permalink:"/docs/tutorial-golang/go-pretty-print",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"GO doc tutorial",permalink:"/docs/tutorial-golang/go-doc"}},l={},d=[{value:"JSON",id:"json",level:2},{value:"Before Pretty Printing",id:"before-pretty-printing",level:3},{value:"After Pretty Printing",id:"after-pretty-printing",level:3},{value:"HTTP Request",id:"http-request",level:2},{value:"Before Pretty Printing",id:"before-pretty-printing-1",level:3},{value:"After Pretty Printing",id:"after-pretty-printing-1",level:3}];function c(e){const n=Object.assign({h1:"h1",admonition:"admonition",p:"p",code:"code",h2:"h2",h3:"h3",pre:"pre",a:"a"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"go-pretty-print",children:"GO pretty print"}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Here are some examples on how you may want to pretty print ",(0,r.jsx)(n.code,{children:"json"})," or an ",(0,r.jsx)(n.code,{children:"http response"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"json",children:"JSON"}),"\n",(0,r.jsx)(n.h3,{id:"before-pretty-printing",children:"Before Pretty Printing"}),"\n",(0,r.jsx)(n.p,{children:"Given the following struct:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type Person struct {\n\tName   string `json:"name"`\n\tAge    int    `json:"age"`\n\tEmail  string `json:"email"`\n\tActive bool   `json:"active"`\n}\n\np := Person{\n\tName:   "John Doe",\n\tAge:    30,\n\tEmail:  "john.doe@example.com",\n\tActive: true,\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["If you use the ",(0,r.jsx)(n.code,{children:"json.Marshal"})," method:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"jsonData, err := json.Marshal(p)\nif err != nil {\n\tlog.Fatal(err)\n}\nfmt.Println(string(jsonData))\n"})}),"\n",(0,r.jsx)(n.p,{children:"The output will be:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'{"name":"John Doe","age":30,"email":"john.doe@example.com","active":true}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"after-pretty-printing",children:"After Pretty Printing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'jsonData, err := json.MarshalIndent(p, "", "    ")\nif err != nil {\n\tlog.Fatal(err)\n}\nfmt.Println(string(jsonData))\n'})}),"\n",(0,r.jsx)(n.p,{children:"The output will be:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "name": "John Doe",\n    "age": 30,\n    "email": "john.doe@example.com",\n    "active": true\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"http-request",children:"HTTP Request"}),"\n",(0,r.jsx)(n.h3,{id:"before-pretty-printing-1",children:"Before Pretty Printing"}),"\n",(0,r.jsxs)(n.p,{children:["If you were to use the standard ",(0,r.jsx)(n.code,{children:"json.Marshal"})," method:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"jsonData, err := json.Marshal(info)\nif err != nil {\n\tlog.Fatal(err)\n}\nfmt.Println(string(jsonData))\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Given a request to ",(0,r.jsx)(n.a,{href:"http://localhost:8080/example?query=test",children:"http://localhost:8080/example?query=test"})," with the header User-Agent: MyBrowser and method GET, the output might look something like:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'{"method":"GET","url":"/example?query=test","headers":{"User-Agent":["MyBrowser"]},"host":"localhost:8080","remoteAddr":"[::1]:12345","requestURI":"/example?query=test"}\n'})}),"\n",(0,r.jsx)(n.p,{children:"This is a compact representation that's not very human-readable."}),"\n",(0,r.jsx)(n.h3,{id:"after-pretty-printing-1",children:"After Pretty Printing"}),"\n",(0,r.jsxs)(n.p,{children:["Using the ",(0,r.jsx)(n.code,{children:"printRequestInfo"})," function which employs ",(0,r.jsx)(n.code,{children:"json.MarshalIndent"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"printRequestInfo(r)\n"})}),"\n",(0,r.jsx)(n.p,{children:"The output will be:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "method": "GET",\n    "url": "/example?query=test",\n    "headers": {\n        "User-Agent": ["MyBrowser"]\n    },\n    "host": "localhost:8080",\n    "remoteAddr": "[::1]:12345",\n    "requestURI": "/example?query=test"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Here's the custom ",(0,r.jsx)(n.code,{children:"printRequestInfo"})," function:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'type RequestInfo struct {\n\tMethod    string      `json:"method"`\n\tURL       string      `json:"url"`\n\tHeader    http.Header `json:"headers"`\n\tHost      string      `json:"host"`\n\tRemoteAddr string     `json:"remoteAddr"`\n\tRequestURI string     `json:"requestURI"`\n}\n\nfunc printRequestInfo(r *http.Request) {\n\tinfo := RequestInfo{\n\t\tMethod:    r.Method,\n\t\tURL:       r.URL.String(),\n\t\tHeader:    r.Header,\n\t\tHost:      r.Host,\n\t\tRemoteAddr: r.RemoteAddr,\n\t\tRequestURI: r.RequestURI,\n\t}\n\n\tjsonData, err := json.MarshalIndent(info, "", "    ")\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tfmt.Println(string(jsonData))\n}\n'})})]})}const h=function(e={}){const{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(c,e)})):c(e)}},2803:(e,n,t)=>{t.d(n,{Zo:()=>a,ah:()=>s});var r=t(5170);const o=r.createContext({});function s(e){const n=r.useContext(o);return r.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const i={};function a({components:e,children:n,disableParentContext:t}){let a;return a=t?"function"==typeof e?e({}):e||i:s(e),r.createElement(o.Provider,{value:a},n)}}}]);